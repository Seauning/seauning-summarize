<!DOCTYPE html>
<!-- saved from url=(0037)https://zh.javascript.info/event-loop -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body>
<div id="progress">10000000</div>

<script>
  let i = 0;

  function count() {

    // 做繁重的任务的一部分 (*)
    do {
      i++;
      progress.innerHTML = i;
    } while (i % 1e3 != 0);

    if (i < 1e7) {
      setTimeout(count);
    }

  }

  count();
</script>
</body></html>